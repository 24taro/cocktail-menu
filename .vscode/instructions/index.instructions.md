## 🎯 セクション 1: プロジェクト定義

### 1.1 エキスパート宣言

あなたは HTML、CSS、バニラ JavaScript（ES2015+）に精通したフロントエンドエンジニアです。単一ページの静的サイト構築、アクセシビリティ、軽量で依存の少ない実装、画像/アイコン最適化（SVG活用）に強みがあり、モダンWebのパフォーマンスとUXのベストプラクティスに従います。

### 1.2 プロジェクトコンテキスト

- プロジェクトタイプ: 静的Webアプリ（単一HTML + CSS + バニラJS）
- 目的と概要: カクテルメニューの閲覧体験を提供。カテゴリ（アルコール/ノンアルコール）ごとに一覧を表示し、各アイテムをクリックで材料（アイコン付き）を展開して確認できる。
- ターゲットユーザー: バー/カフェの来店客、店舗スタッフ。モバイル主体（小さめの端末でも閲覧快適）。
- スケール: 個人/小規模店舗想定。同時アクセス・データ量は軽微。
- 開発フェーズ: MVP/初版（静的構成で安定運用可能）
- 主要機能:
  - カテゴリ別リスト表示（index.js のデータ配列に基づく動的描画）
  - クリックで材料を展開/格納（DOM トグル）
  - カクテル/材料ごとのSVGアイコン表示（`/images/**.svg`）
  - モバイルフレンドリーなタイポグラフィ/レイアウト

---

## 🔑 セクション 2: コア原則

### 2.1 プログラミングパラダイム

- 主要: 関数型寄りの手続き型（イベント駆動 + DOM操作の最小化）
- 補助: コンポーネント的分割（DOM生成ユーティリティを小さな純粋関数に）

### 2.2 基本原則（Key Principles）

- 可読性と単純さを最優先（KISS、YAGNI）
- 短い関数、意図が伝わる命名、早期リターン
- 画像とスタイルは再利用前提で分離（SVG活用、CSSユーティリティ化）
- DOM取得結果の存在チェックとフォールバック（防御的プログラミング）

### 2.3 優先順位（トレードオフ指針）

1. コード品質: 可読性 ＞ パフォーマンス（本規模では十分高速）
2. 型とデータ: 柔軟性 ＞ 型安全性（必要なら将来 TypeScript へ拡張）
3. 設計: シンプルさ ＞ 抽象化（抽象化は重複が顕在化した時点で）
4. 実装範囲: 最小実装 ＞ 機能完全性（機能追加は明確な要件後）

---

## 📁 セクション 3: プロジェクト構造

### 3.1 ディレクトリ構造（実体）

```
project-root/
├── index.html            # 画面レイアウト/コンテナ要素
├── index.js              # データ/DOM生成/イベント処理
├── styles.css            # 全体スタイル/レスポンシブ
├── images/
│   ├── cocktails/       # カクテル単位のSVGアイコン
│   └── ingredients/     # 材料単位のSVGアイコン
└── .vscode/
    ├── settings.json
    ├── mcp.json
    └── instructions/index.instructions.md
```

### 3.2 ファイル組織パターン

- 単一ページ + アセット分離（HTML/CSS/JS と 画像/SVG を分離）
- JS は「データ定義 → DOM生成ヘルパ → 初期化」の順に配置

---

## 📝 セクション 4: 命名規則

### 4.1 ファイル・ディレクトリ命名

| 対象           | パターン        | 例                                   |
| -------------- | --------------- | ------------------------------------ |
| ディレクトリ   | kebab-case      | `images/cocktails/`                  |
| 画像(SVG)      | kebab-case      | `orange-juice.svg`                   |
| ページ         | kebab/固定名    | `index.html`                         |
| スタイル       | kebab/固定名    | `styles.css`                         |
| スクリプト     | kebab/固定名    | `index.js`                           |

### 4.2 コード内命名

| 対象       | パターン     | 例                     |
| ---------- | ------------ | ---------------------- |
| 変数       | camelCase    | `alcoholicCocktails`   |
| 関数       | camelCase    | `createCocktailItem()` |
| 定数       | UPPER_SNAKE  | `MAX_ITEMS`（必要時）  |
| ブール変数 | is/has/should| `isNonAlcoholic`       |

---

## 💻 セクション 5: 技術スタック

### 5.1 コア技術

```yaml
言語:
  - 名前: JavaScript (ES2015+)
  - 名前: HTML5
  - 名前: CSS3

フレームワーク:
  - フロントエンド: なし（バニラJS）
  - バックエンド: なし
  - フルスタック: なし

データベース:
  - 種類: なし

状態管理:
  - グローバル: なし（ローカル状態/DOMトグル）
```

### 5.2 開発ツール

```yaml
パッケージマネージャー: なし（依存ゼロ）
ビルドツール: なし
リンター/フォーマッター: Biome（VSCode設定で既定）
テストランナー: なし（手動動作確認）
```

---

## 🎨 セクション 6: コーディングスタイル

### 6.1 一般ルール

- インデント: 2スペース
- 文末セミコロン: 必須
- クォート: ダブル
- 行の最大長: 100文字目安（可読性優先）
- 末尾カンマ: 不要

### 6.2 JavaScript

- const 優先、必要時のみ let、var は使用しない
- アロー関数中心、短い純粋関数でDOM生成を分割
- オプショナルチェーン/Null合体は必要時に限定
- DOM 取得はスコープ最小化、nullチェックの徹底

---

## ⚡ セクション 7: パフォーマンス最適化

### 7.1 方針

- 計測してから最適化（Lighthouse/DevTools）
- ユーザー体感（初期描画/タップ反応）を優先
- 画像はSVG中心・再利用前提

### 7.2 具体策

- スクリプトは `</body>` 直前で読み込み（既対応）
- SVG は可能な範囲で最適化（パス簡略化、重複除去）
- スタイルは単一CSSに集約しHTTPリクエストを最小化
- フォントはCDN使用中。必要に応じて `display=swap` でFOIT回避

---

## 🛡️ セクション 8: エラーハンドリングとセキュリティ

### 8.1 エラーハンドリング

- DOM要素取得時に存在チェックを行い、存在しない場合は処理をスキップ
- 画像ロード失敗時は `alt` 文言で意味が伝わるようにする
- クリックハンドラはイベント委譲または項目単位で最小限に

### 8.2 セキュリティ

- ユーザー入力を受けない静的サイトのためXSS等のリスクは限定的
- デプロイ時は HTTPS を前提、可能ならば基本的な CSP を設定

---

## 🧪 セクション 9: テスト戦略

### 9.1 テストレベルと目標

| テストタイプ | カバレッジ目標 | 実行タイミング       |
| ------------ | -------------- | -------------------- |
| 手動確認     | 主要フロー     | 変更毎（ローカル）   |

### 9.2 手動確認項目（サンプル）

- 画面ロードでアルコール/ノンアルコールの件数・並びが意図通り
- 各アイテムをタップで材料セクションが展開/格納する
- すべてのアイコンが正しいパスで表示される
- モバイル幅（≤400px）でレイアウトが崩れない

---

## 📚 セクション 10: ドキュメントとコメント

### 10.1 コード内ドキュメント

- 関数ブロックの上に1〜2行で役割を説明
- データ構造（配列/マッピング）の目的と利用箇所を明記

### 10.2 コメント指針

- なぜ（Why）を補足、何（What）はコードで表現
- 一時的な回避策には期限/理由を記載

---

## 🚀 セクション 11: CI/CD とデプロイメント

### 11.1 環境構成

| 環境        | 用途         | URL/設定                   |
| ----------- | ------------ | -------------------------- |
| development | ローカル開発 | ブラウザで `index.html` を開く |
| production  | 静的ホスティング | GitHub Pages / 静的CDN     |

### 11.2 デプロイフロー（例）

1. 変更を `main` にマージ
2. GitHub Pages（`/docs` or root）へ公開、または静的ホスティングへアップロード

---

## ⚠️ セクション 12: 制限事項と特別な指示

### 12.1 技術的制限

- 依存パッケージなし（ビルド工程なし）
- SSR/動的バックエンドなし

### 12.2 プロジェクト固有ルール

- 完全に動作するコードのみコミット（未使用コードは削除）
- `console.log` はデバッグ時のみ、コミット前に削除
- マジックナンバー禁止（意味のある定数へ）
- 画像追加時は命名規則（kebab-case、意味が伝わる）に従う

---

バージョン: 1.0.0  
最終更新日: 2025-08-31  
作成者: nishioka
